<div class="m-commentsEntityOutlet__topBar" *ngIf="!showOnlyPoster">
  <div class="m-commentsEntityOutlet__header">
    <span class="m-commentsEntityOutlet__title" (click)="toggleComments()"
      >Comments</span
    >
    <span
      class="m-commentsEntityOutlet__count"
      (click)="toggleComments()"
      *ngIf="count > 0"
      >{{ count }}</span
    >
  </div>
  <div *ngIf="false" class="m-commentsEntityOutlet__filter">
    <i class="material-icons">filter_list</i>
  </div>
</div>
<div
  class="m-commentsEntityOutlet__startConversation"
  *ngIf="count < 1 && !showOnlyPoster"
  i18n="@@MINDS__COMMENTS__START_CONVERSATION"
>
  <span>Start the conversation!</span>
</div>
<ng-container *ngIf="showOnlyPoster">
  <div
    class="m-commentsEntityOutlet__optimisticList"
    *ngIf="optimisticList.length > 0"
  >
    <ng-container *ngFor="let comment of optimisticList">
      <m-comment
        [comment]="comment"
        [entity]="entity"
        [parent]="parent"
        [level]="0"
        [canEdit]="canEdit"
        [canDelete]="canDelete"
        [showReplies]="comment.show_replies"
        (delete)="delete(i)"
        (saved)="edited(i, $event)"
        (onReply)="reply($event.comment)"
      ></m-comment>
    </ng-container>
  </div>

  <m-comment__poster
    *ngIf="(legacyActivityService.allowComment$ | async) && !showOnlyTree"
    [guid]="guid"
    [parent]="entity"
    [entity]="entity"
    [currentIndex]="0"
    [level]="0"
    (posted)="onPosted($event)"
    (optimisticPost)="onOptimisticPost($event)"
  >
  </m-comment__poster>
</ng-container>
<m-comments__tree
  #commentsTree
  *ngIf="!showOnlyPoster || showOnlyTree"
  [entity]="entity"
  [canDelete]="canDelete"
>
</m-comments__tree>
